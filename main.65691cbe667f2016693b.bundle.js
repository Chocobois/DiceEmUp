(()=>{"use strict";var e,t={106:(e,t,i)=>{i(260);class s extends Phaser.Scene{constructor(e){super(e)}fade(e,t,i){let s=Phaser.Display.Color.ColorToRGBA(i);this.cameras.main.fadeEffect.start(e,t,s.r,s.g,s.b)}flash(e,t=16777215,i=1){this.flashRect||(this.flashRect=this.add.rectangle(this.CX,this.CY,this.W,this.H,0),this.flashRect.setDepth(9999999999)),this.flashRect.setAlpha(i),this.flashRect.fillColor=t,this.tweens.add({targets:this.flashRect,alpha:{from:i,to:0},ease:"Cubic.Out",duration:e})}shake(e,t=1,i=0){this.cameraShakeValue=t,this.tweens.add({targets:this,cameraShakeValue:{from:t,to:i},ease:i<t?"Sine.Out":"Linear",duration:e,onComplete:()=>{this.cameraShakeValue=0}})}addEvent(e,t,i=this){return this.time.addEvent({delay:e,callback:t,callbackScope:i})}createText(e=0,t=0,i=20,s="#FFF",a=""){return this.add.text(e,t,a,{fontFamily:"Fredoka One",fontSize:Math.max(i,1)+"px",color:s}).setLineSpacing(.4*i)}fitToScreen(e){e.setScale(Math.max(this.W/e.width,this.H/e.height))}containToScreen(e){e.setScale(Math.min(this.W/e.width,this.H/e.height))}get W(){return this.cameras.main.displayWidth}get H(){return this.cameras.main.displayHeight}get CX(){return this.cameras.main.centerX}get CY(){return this.cameras.main.centerY}}const a=i.p+"00cb791b4d4b2b92690cc1d17e336848.png",h=i.p+"e9f57b9ff95bc32e37f6c135e568b4fc.png",o=i.p+"7adffeddd5cf6f9c11934413897940e2.png",r=i.p+"38f2579b71b87332edb23dff26dc3825.png",n=i.p+"5b6fc4859a2b85fbb111c7bdc42c0390.png",d=i.p+"1860d977a6980148b0009f4ca1f14b6b.png",l=i.p+"a648c12ebdab97a479462cea7e791182.png",c=i.p+"4c05fd83c92a63dafcc00fcb63dba985.png",p=i.p+"ad59e13b87f0fd34879887a5ba8ba0f6.png",m=i.p+"6b62e014e9d4b53a28eda0121cd02cd9.png",u=i.p+"16da73507ea8936b905272c586db4ab1.png",f=i.p+"bf7e792eb8635c3b223cdff7953b26c4.png",_=i.p+"2a265a97091b8efaeabac1db6d9f2c0a.png",g=i.p+"8d921454281d94731af32e8217ea6b80.png",b=i.p+"d51e45c215783ef155884ac3d03ae899.png",y=i.p+"7039e520addcb39185fd81941a5a5e8b.png",v=i.p+"bf1bc67a79dd072a1356625ca80da0be.png",k=i.p+"0056110d721ad762b43cdf79c11cf2aa.png",x=i.p+"5a81242f5d59b6ab5aabf414a0866738.png",w=i.p+"435f27782fb11f2f44217c1751610ae9.png",S=i.p+"e92fd0594c522d0d9924a0d742edc1ba.png",T=i.p+"5148cae5ae443956d4267353934e02ad.png",M=i.p+"4b6bed4fd2d498788e9b42a5a6fff907.png",C=i.p+"9771434905ce7b878ce43a60e3045b5c.png",P=i.p+"6cb1ab17a5256e27f53fd45102c5f36b.png",F=i.p+"75935c5b397b9f2fbe4a4514cacb3494.png",O=i.p+"e5a5ddff9bf14955e91d42726f33ea61.png",A=i.p+"1ec16dd937b3d315f664119b1c020192.png",E=i.p+"8bf267b6b28788c647ae503af2eceb15.png",B=i.p+"c6b7baf01e528c4b9ef67c968edbad69.png",D=i.p+"967936af24f4a7d74b40e3d1278b97c1.png",R=i.p+"391921379e00fdcd5412af9dbee47205.png",j=i.p+"e22cffb10a50c362afeae65ab23d9409.png",N=i.p+"76335c41c03d181040ddfd6ca106ab42.png",I=i.p+"45a5a493d02b716d95be4d3f7abe99e9.png",V=i.p+"5748ac2c481cbe138cf1d36bf3d150bf.png",H=i.p+"d27871b6060bd8471faa10040b2f1a85.png",G=i.p+"a8890367c79edaaf341b8fc9a54e1fac.mp3",W=i.p+"35e10f78d5e2a6f223d220b23e2217d8.mp3",X=i.p+"6c9c6408688cd513ac896183e69c78a9.mp3",Y=i.p+"aecc93bfa6cd83f5c3e5b655afe79d3e.mp3",L=i.p+"87db8870cd190aae17816b4e80369aef.mp3",U=i.p+"8fa52dff5f6b355bc37be29946ecc320.mp3",K=i.p+"14a74739523f13fe0426445c7ff7ec62.mp3",Q=i.p+"beed8c259bb9292f51e4a94971b0ba72.mp3",J=i.p+"57c30871247679d52ddc0b78cec80a78.mp3",q=i.p+"22a1d12cee3c6e18f41ea2891c54655b.mp3",$=i.p+"c3944f417f75e1a88657a888077a5766.mp3",z=i.p+"b85f867fb6ccfab1e9c7791576a8faa9.mp3",Z=i.p+"63656108c606e74cff21f6ea6abbc2d5.mp3",ee=i.p+"2f1c5172eedf798c66266ec1d36d0ca4.mp3",te=i.p+"7d521564675cf7d9cd2ac59b8e576cc7.mp3",ie=i.p+"703b7e6fa0d9a1407088b6aeb6655008.mp3",se=i.p+"9178981d8d896e9f1c5de7ebc8e1f200.mp3",ae=i.p+"4b7842109f21ed470e0c02b7fb4407e4.mp3",he=i.p+"e174153561c17db040d287d354120d5e.mp3",oe=i.p+"e75c67e79887cf091328384986c9be73.mp3",re=i.p+"fa6756baa8e0818be9d0211729357b73.mp3",ne=i.p+"ec90035b94b9cdc41270adbb64bfed38.mp3",de=i.p+"1ad8225fac2940a12e9647c0518f192a.mp3",le=i.p+"4c63ff30768c583c19e91d76c59eaaaa.mp3",ce=i.p+"f8af57df67ec09ea6aaf7ae7f5fcd10f.mp3",pe=i.p+"51d78d20956269eb1210c8ee36d5d16a.mp3",me=i.p+"dc3a5f9ba96ba3668ea5d9426fef91cc.mp3",ue=i.p+"b900c60866c3f4dfe339d27085187879.mp3",fe=i.p+"8ba7ab8ca7b2c5676e8ec434c6f9b938.mp3",_e=i.p+"8f0ab788def2c3ce3bbb19254691777a.mp3",ge=i.p+"daa108f78a9a6e91b23cef781506f88b.mp3",be=i.p+"e6599f62c584f35f70022b5ebc0f133e.mp3",ye=i.p+"ada96b70a7b09895461167d09e46c190.mp3",ve=i.p+"ac34be72e0dc3ba9546fc2411b487595.mp3",ke=i.p+"7d425a97cb42233c5d93cf0228f63e9b.mp3",xe=i.p+"8d995ef9a0f504ef5ee371fd46711ab2.mp3",we=i.p+"e29ef5edef84378d9b575ee418973c76.mp3",Se=i.p+"2dae0d2e74c74bb1f965c72d4c2d6457.mp3",Te=i.p+"0a51e029d967b7823211e980c0066385.mp3",Me=i.p+"95b33bf7f7f2d1a6e56059549e2acad8.mp3",Ce=i.p+"fb4dc2f36e86c78b2b0f65c46c9295b2.mp3",Pe=i.p+"116921d6c72a7cc9eb5ef0d2324b594d.mp3",Fe=i.p+"bb89ddfa0b91bdfc114a83fcaf4778b6.mp3",Oe=i.p+"74e9b7147d0d25d52aa2e6b47ac1a486.mp3",Ae=i.p+"f2208145d397c47bf00beb47b44a4ed1.mp3",Ee=i.p+"866d7df21a16640436d38126e1a88924.mp3",Be=i.p+"1212b3eeed8f6a2e18ad1944ff90f839.mp3",De=i.p+"d52b1f9adaf6bd618a490fd5e6bebd05.mp3",Re=i.p+"ea9d418ed71d78599026eb72bf1b94db.mp3",je=i.p+"155820795ebed6e89d3e381898eb7f5c.mp3",Ne=i.p+"21cf50dcf9351f4c65fabbfa228072b1.mp3",Ie=i.p+"0aeec1f7136d61a35f143b839ea7b753.mp3",Ve=i.p+"9e9a744ee97ab79f6caeeed21f1ae245.mp3",He=i.p+"b5d65d87a37d76a139135e0025828a76.mp3",Ge=i.p+"a5ecd6d0f5d78c1e60b70c8261733d1f.mp3",We=i.p+"d61e85f0e849966914a0a62c453f2284.mp3",Xe=i.p+"14aa12cbc8c6a430fc8a1c6517db5364.mp3",Ye=i.p+"e648bc8f44a3b217ebf3c40b64b87fde.mp3",Le=i.p+"e2626b52d3a223dbac7e12ff8928c878.mp3",Ue=i.p+"ce0fd7ceee72d2ae3cd6249f70731ba2.mp3",Ke=i.p+"b8c01b23c6c01c9f4f0942fa25bf9b57.mp3",Qe=i.p+"36d6ba98bcafa59da34e8242409dbeb4.mp3",Je=i.p+"f88369e912c976b99cac075ea63427d1.mp3",qe=i.p+"cf3bae29a97b65d2aaafc58cf574de61.mp3",$e=i.p+"89c440649c5fc197d21891da9c35b9d9.mp3",ze=i.p+"050181f54f003d1efc60957321a6df5f.mp3",Ze=i.p+"935cb6f5b353dc4e9cef6427688dd7bd.mp3",et=i.p+"d43557f26e3f84bdecb3194b94f84e22.mp3",tt=i.p+"fb6c53143f8bff809d1d09199073ce0c.mp3",it=i.p+"ce1d7b29db791114683c2bedabeaa92c.mp3",st=i.p+"d56aea6aea88cb10d4f1f8c0ff80644b.mp3",at=i.p+"dced193ae67864a585bc9f7c9abed2c1.mp3",ht=i.p+"a863342ed99aff2ef260afebf8e2d33e.mp3",ot=i.p+"e05615b77ffaac40dfe5417bf39d5dd3.mp3",rt=i.p+"6bb0bae2d9b7009a8fa67d0e881ff093.mp3",nt=i.p+"9a37d099ae5904441c4f03052d9328e7.mp3",dt=i.p+"1ed59e986d2478f90d3e0488a20cd65f.mp3",lt=i.p+"043f93b9c7dfbaa81f3cd8776c582e3e.mp3",ct=i.p+"d6355a44ca3f084e42b46890ecca0570.mp3",pt=i.p+"a762c918644fa66f15c6be62c8f1c1df.mp3",mt=i.p+"6288e4e56d528095fb8574b2d21c90d3.mp3",ut=i.p+"600a7c0a4b9dffb0b09de018c40fc95d.mp3",ft=i.p+"917be22002c6f891e04ecef8cd6e0f99.mp3",_t=i.p+"ffe2cea03087e5faa33d1c2f17c16c68.mp3",gt=i.p+"10863537ab7c48144347a4b20a62ce23.mp3",bt=i.p+"d98c6439ebc828fc7258c49584245f29.mp3",yt=i.p+"39776994ec0fee7108ef17535366110e.mp3",vt=i.p+"50fc41a0e8b2f668b4dd5e73171ceb18.mp3",kt=i.p+"f5f43b69409f197f460de4b63d7db5dc.mp3",xt=i.p+"021fd5b05d31a84fd91e07857791ed59.mp3",wt=i.p+"c69f22cd5ab247609388943643a3fa4f.mp3",St=i.p+"dba9e18949226c56c6e9d9d7358dd329.mp3",Tt=i.p+"309c676cf3bb833de86174936e2061ec.mp3",Mt=i.p+"2eaf3b65b38d30682225d5f029304e7f.mp3",Ct=i.p+"7c65ae3f4b594f68eb66f6e6e089be7a.mp3",Pt=i.p+"6d33b15051f4fb317f10457d2abb4f36.mp3",Ft=i.p+"77df9cac6b08b5bfe168a5ffe66a7fd7.mp3",Ot=i.p+"6a0964eb7fbc38d0406ebbb04cc02393.mp3",At=i.p+"d34b1fbd1fbe10a8a8399bc9c50c4f6c.mp3",Et=i.p+"cce001aeb142b227c6c3c1fb82f0fd5d.mp3",Bt=i.p+"39d367712d53b2a3fd7709395d3870af.mp3",Dt=i.p+"39cd32031ca79f0afbec26a34ff2d0f4.mp3",Rt=i.p+"c758aebc990d04d9e1423845541c80fa.mp3",jt=i.p+"d0cd2d6706ea2d2f0190154e97fe6814.mp3",Nt=i.p+"21d10dd494c4385d009684ecb5492554.mp3",It=i.p+"50db6677610a577a1e9d99141eac6957.mp3",Vt=i.p+"d9d0184f71660c1af2b510b83810b772.mp3",Ht=i.p+"e60945d299863f648c209128f909ec73.mp3",Gt=i.p+"0bcb9e42513f78bc98684c83f9a2da5e.mp3",Wt=i.p+"0f8e358f4548583dd56a2dfab5de0e43.mp3",Xt=i.p+"3a2e54a967a098eca323bdf7067eb3b7.mp3",Yt=i.p+"c5df347da20ce808b54476a02a7fadee.mp3",Lt=i.p+"17d055d640a5b605fd997e22ce664dae.mp3",Ut=i.p+"daffaae218955fb796e6c9a54a4b29a8.mp3",Kt=i.p+"7457068e09e0ed3babdae3edebbf9678.mp3",Qt=i.p+"4350e836e02b65597204e708ce74f0c6.mp3",Jt=i.p+"26cb1c76472afa975ced18829ca770ef.mp3",qt=i.p+"a5310d98c128256047c5409948252941.mp3",$t=i.p+"728c86da403a7928e0e3b923970297cb.mp3",zt=i.p+"a5d6b45457d7e1a944f4809fa7c92f36.mp3",Zt=i.p+"2f57149055123628205ad2ce40723d2f.mp3",ei=i.p+"686168feebdf0414e6768eda260ca9bb.mp3",ti=i.p+"a8733057d5a86d380e87aeff5bf50335.mp3",ii=i.p+"bc9968d567ae56bf112d82d374d11d1b.mp3",si=i.p+"707a408d348f650e67ccac515c3014aa.mp3",ai=i.p+"bfa8431236b92cf498c9367ef37bd2dd.mp3",hi=i.p+"6f5e73a24f3afaf29ac370600f109105.mp3",oi=i.p+"6563617ce8ada4c057700c291a57b8a3.mp3",ri=i.p+"140241f2cd01a0f8994de0c9cb10beac.mp3",ni=i.p+"6dd17154e38ff1c6ab742329451165d2.mp3",di=i.p+"9b659602e9fd40753d4c6a9680357256.mp3",li=i.p+"2dfa0350e0e33889c7d4d7f9771d7fe9.mp3",ci=i.p+"07b83b5401aebb5c42a57fdf96996018.mp3",pi=i.p+"d31a8862eaa5eee362cbf33827208eb6.mp3",mi=i.p+"4438c1f2ada1ca3607ba1e3e5d62af99.mp3",ui=i.p+"0c3a7809aeb3e9504f7e85b59ee26ddf.mp3",fi=i.p+"2d76e39c9303d35f9107a2d0403c3898.mp3",_i=i.p+"3490424c5deaae45991e9caf1593354e.mp3",gi=i.p+"de8cd3447c3f43aad55253f26aa9b03d.mp3",bi=i.p+"fc3dcbc1aa3f8a5aaac9ee8db8d4d929.mp3",yi=i.p+"3840f142828cf95cd2de6648b1be4739.mp3",vi=i.p+"8fa373c837ea5de98a33a2185cce4c08.mp3",ki=i.p+"68c4ce528c9f4d6f38d1d07238f8cdf7.mp3",xi=i.p+"b44fe10091575bc1fffa6ceef056cd83.mp3",wi=i.p+"d5c99207b10419606dcad445c27eab50.mp3",Si=i.p+"a98c17cbe9abb568d575e130b92bc041.mp3",Ti=i.p+"ac6e6fad7518218bc47b77b75b54c046.mp3",Mi=i.p+"3414f51022920a4e3dbd620daaa005d6.mp3",Ci=i.p+"2c155065a9c2591f9fb329f84b00d6cf.mp3",Pi=i.p+"5a56659e7a552dfe80ace9cc12e51294.mp3",Fi=i.p+"44823a167f137a60fb1ca5a61cf54f3b.mp3",Oi=i.p+"18032f8eae55c85d5df2ba660b621cf5.mp3",Ai=i.p+"9c9b4e6ce13f563eeb1b432b8efa5661.mp3",Ei=i.p+"ef16407aea310496427cec1840fbbdbe.mp3",Bi=i.p+"8e0b93328b8107fb20ba203a61123279.mp3",Di=i.p+"3980b7388b44905c05a3bc82b7f09a7f.mp3",Ri=i.p+"2c43f4abf0748728babf8f1460a9107f.mp3",ji=i.p+"0ae1b21183ca5b3476796c7a0a54e6c6.mp3",Ni=i.p+"96396b0f1e39f57b80fdca5ea7566a02.mp3",Ii=i.p+"79b814c70ee5e1568b53810867144844.mp3",Vi=i.p+"4c9f932c57f93c76c958f35b293c0236.mp3",Hi=i.p+"7a18274db0adec59b48f5e1b9b964ce2.mp3",Gi=i.p+"cbbabbb38a4457f1f7e7679b58c164d0.mp3",Wi=i.p+"87cb04db58c189cf233699dc7252735d.mp3",Xi=i.p+"62fe369a65659937d81a319ad5698a43.mp3",Yi=i.p+"e6ee1db250849d421c11b60d98ae7683.mp3",Li=i.p+"870a16222cbc6c9b8ec7fc94a3eb2933.mp3",Ui=i.p+"244d82cd6e4bfd3d573deaf0612d4a33.mp3",Ki=i.p+"3b4f26c08f85d42a3afa9c7afe2a5843.mp3",Qi=i.p+"736300be74c4a85e9659ddec07ff55bc.mp3",Ji=i.p+"ae541619342b735a2faf1260cc3d1243.mp3",qi=i.p+"0e1876315cbd966d114fd587ccdb35de.mp3",$i=[{key:"bg_gameover",path:a},{key:"bg_shadow",path:h},{key:"bg_town",path:o},{key:"fg_town",path:r},{key:"dice_shadow",path:n},{key:"board_border",path:v},{key:"board_tile",path:k},{key:"healthbar",path:x},{key:"heart_1",path:C},{key:"heart_2",path:P},{key:"heart_3",path:F},{key:"heart_4",path:O},{key:"heart_empty",path:A},{key:"heart_full",path:E},{key:"cover_background_orange",path:B},{key:"cover_body",path:D},{key:"cover_roof",path:R},{key:"cover_hands",path:j},{key:"cover_dice_blue",path:N},{key:"cover_dice_green",path:I},{key:"cover_dice_red",path:V},{key:"cover_knights",path:H}],zi=[{key:"dice",path:d,width:256,height:256},{key:"dragon_idle",path:l,width:420,height:540},{key:"dragon_prepare",path:c,width:420,height:540},{key:"dragon_throw",path:p,width:420,height:540},{key:"dragon_hurt",path:m,width:420,height:540},{key:"enemy_peasant",path:u,width:270,height:270},{key:"enemy_squire",path:f,width:270,height:270},{key:"enemy_tank",path:_,width:340,height:270},{key:"enemy_trojan",path:g,width:300,height:270},{key:"fire_explosion",path:y,width:214,height:214},{key:"meme_explosion",path:b,width:200,height:282},{key:"attack_button",path:w,width:532,height:219},{key:"attack_button_fire",path:S,width:512,height:256},{key:"music",path:T,width:300,height:300},{key:"audio",path:M,width:300,height:300}],Zi=[{key:"u_attack_button",path:G,volume:1},{key:"u_disabled",path:W,volume:1},{key:"u_hover",path:X,volume:1},{key:"e_advance",path:Y,volume:1},{key:"e_damage",path:L,volume:1},{key:"e_jump_out",path:U,volume:1},{key:"d_damage",path:K,volume:1},{key:"m_main_music",path:Q,volume:1},{key:"m_main_menu",path:J,volume:1},{key:"m_city_ambience",path:q,volume:1},{key:"m_main_music_light",path:$,volume:1},{key:"j_fanfare",path:z,volume:1},{key:"j_defeat",path:Z,volume:1},{key:"j_orchestra",path:ee,volume:1},{key:"j_strings",path:te,volume:1},{key:"j_timpani",path:ie,volume:1},{key:"j_trumpet",path:se,volume:1},{key:"m_sparkle",path:ae,volume:1},{key:"m_scatter",path:he,volume:1},{key:"m_slice",path:oe,volume:1},{key:"m_fire_ignite_1",path:re,volume:1},{key:"m_fire_ignite_2",path:ne,volume:1},{key:"m_fire_ignite_3",path:de,volume:1},{key:"m_whoosh_hard_1",path:le,volume:1},{key:"m_whoosh_hard_2",path:ce,volume:1},{key:"m_whoosh_hard_3",path:pe,volume:1},{key:"m_whoosh_hard_4",path:me,volume:1},{key:"m_whoosh_medium_1",path:ue,volume:1},{key:"m_whoosh_medium_2",path:fe,volume:1},{key:"m_whoosh_medium_3",path:_e,volume:1},{key:"m_whoosh_medium_4",path:ge,volume:1},{key:"m_whoosh_soft_1",path:be,volume:1},{key:"m_whoosh_soft_2",path:ye,volume:1},{key:"m_whoosh_soft_3",path:ve,volume:1},{key:"m_whoosh_soft_4",path:ke,volume:1},{key:"t_place_multiple_1",path:xe,volume:1},{key:"t_place_multiple_2",path:we,volume:1},{key:"t_place_multiple_3",path:Se,volume:1},{key:"t_place_multiple_4",path:Te,volume:1},{key:"t_place_multiple_5",path:Me,volume:1},{key:"t_place_single_long_1",path:Ce,volume:1},{key:"t_place_single_long_2",path:Pe,volume:1},{key:"t_place_single_long_3",path:Fe,volume:1},{key:"t_place_single_long_4",path:Oe,volume:1},{key:"t_place_single_long_5",path:Ae,volume:1},{key:"t_place_single_short_1",path:Ee,volume:1},{key:"t_place_single_short_2",path:Be,volume:1},{key:"t_place_single_short_3",path:De,volume:1},{key:"t_place_single_short_4",path:Re,volume:1},{key:"t_place_single_short_5",path:je,volume:1},{key:"t_slide_multiple_1",path:Ne,volume:1},{key:"t_slide_multiple_2",path:Ie,volume:1},{key:"t_slide_multiple_3",path:Ve,volume:1},{key:"t_slide_single_1",path:He,volume:1},{key:"t_slide_single_2",path:Ge,volume:1},{key:"t_slide_single_3",path:We,volume:1},{key:"t_slide_single_4",path:Xe,volume:1},{key:"t_slide_single_5",path:Ye,volume:1},{key:"t_sweep_multiple_1",path:Le,volume:1},{key:"t_sweep_multiple_2",path:Ue,volume:1},{key:"t_sweep_multiple_3",path:Ke,volume:1},{key:"t_sweep_single_1",path:Qe,volume:1},{key:"t_sweep_single_2",path:Je,volume:1},{key:"t_sweep_single_3",path:qe,volume:1},{key:"t_sweep_single_4",path:$e,volume:1},{key:"t_sweep_single_5",path:ze,volume:1},{key:"t_sweep_single_6",path:Ze,volume:1},{key:"t_take_multiple_1",path:et,volume:1},{key:"t_take_multiple_2",path:tt,volume:1},{key:"t_take_multiple_3",path:it,volume:1},{key:"t_take_multiple_4",path:st,volume:1},{key:"t_take_multiple_5",path:at,volume:1},{key:"t_throw_cardboard_multiple_1",path:ht,volume:1},{key:"t_throw_cardboard_multiple_2",path:ot,volume:1},{key:"t_throw_cardboard_multiple_3",path:rt,volume:1},{key:"t_throw_cardboard_multiple_4",path:nt,volume:1},{key:"t_throw_cardboard_single_long_1",path:dt,volume:1},{key:"t_throw_cardboard_single_long_2",path:lt,volume:1},{key:"t_throw_cardboard_single_long_3",path:ct,volume:1},{key:"t_throw_cardboard_single_medium_1",path:pt,volume:1},{key:"t_throw_cardboard_single_medium_2",path:mt,volume:1},{key:"t_throw_cardboard_single_medium_3",path:ut,volume:1},{key:"t_throw_cardboard_single_short_1",path:ft,volume:1},{key:"t_throw_cardboard_single_short_2",path:_t,volume:1},{key:"t_throw_cardboard_single_short_3",path:gt,volume:1},{key:"t_throw_desk_multiple_1",path:bt,volume:1},{key:"t_throw_desk_multiple_2",path:yt,volume:1},{key:"t_throw_desk_multiple_3",path:vt,volume:1},{key:"t_throw_desk_multiple_4",path:kt,volume:1},{key:"t_throw_desk_multiple_5",path:xt,volume:1},{key:"t_throw_desk_single_1",path:wt,volume:1},{key:"t_throw_desk_single_2",path:St,volume:1},{key:"t_throw_desk_single_3",path:Tt,volume:1},{key:"t_throw_desk_single_4",path:Mt,volume:1},{key:"t_throw_desk_single_5",path:Ct,volume:1},{key:"t_throw_felt_single_1",path:Pt,volume:1},{key:"t_throw_felt_single_2",path:Ft,volume:1},{key:"t_throw_felt_single_3",path:Ot,volume:1},{key:"t_throw_felt_single_4",path:At,volume:1},{key:"t_throw_felt_single_5",path:Et,volume:1},{key:"t_throw_felt_to_desk_1",path:Bt,volume:1},{key:"t_throw_felt_to_desk_2",path:Dt,volume:1},{key:"h_fondle_hard_1",path:Rt,volume:1},{key:"h_fondle_hard_2",path:jt,volume:1},{key:"h_fondle_hard_3",path:Nt,volume:1},{key:"h_fondle_medium_1",path:It,volume:1},{key:"h_fondle_medium_2",path:Vt,volume:1},{key:"h_fondle_medium_3",path:Ht,volume:1},{key:"h_fondle_soft_1",path:Gt,volume:1},{key:"h_fondle_soft_2",path:Wt,volume:1},{key:"h_fondle_soft_3",path:Xt,volume:1},{key:"h_shake_hand_closed_1x",path:Yt,volume:1},{key:"h_shake_hand_closed_2x",path:Lt,volume:1},{key:"h_shake_hand_closed_3x",path:Ut,volume:1},{key:"h_shake_hand_closed_4x",path:Kt,volume:1},{key:"h_shake_hand_open_1x",path:Qt,volume:1},{key:"h_shake_hand_open_2x",path:Jt,volume:1},{key:"h_shake_hand_open_3x",path:qt,volume:1},{key:"h_shake_hand_open_4x",path:$t,volume:1},{key:"h_swirl_hand_closed_1",path:zt,volume:1},{key:"h_swirl_hand_closed_2",path:Zt,volume:1},{key:"h_swirl_hand_closed_3",path:ei,volume:1},{key:"h_swirl_hand_open_1",path:ti,volume:1},{key:"h_swirl_hand_open_2",path:ii,volume:1},{key:"h_swirl_hand_open_3",path:si,volume:1},{key:"d_dice_tap_long_1",path:ai,volume:1},{key:"d_dice_tap_long_2",path:hi,volume:1},{key:"d_dice_tap_long_3",path:oi,volume:1},{key:"d_dice_tap_long_4",path:ri,volume:1},{key:"d_dice_tap_long_5",path:ni,volume:1},{key:"d_dice_tap_short_1",path:di,volume:1},{key:"d_dice_tap_short_2",path:li,volume:1},{key:"d_dice_tap_short_3",path:ci,volume:1},{key:"d_dice_tap_short_4",path:pi,volume:1},{key:"d_dice_tap_short_5",path:mi,volume:1},{key:"d_fall_down_and_hit_steel_leg_of_an_ikea_desk",path:ui,volume:1},{key:"c_cup_put_multiple_1",path:fi,volume:1},{key:"c_cup_put_multiple_2",path:_i,volume:1},{key:"c_cup_put_multiple_3",path:gi,volume:1},{key:"c_cup_put_single_1",path:bi,volume:1},{key:"c_cup_put_single_2",path:yi,volume:1},{key:"c_cup_put_single_3",path:vi,volume:1},{key:"c_cup_take_multiple_1",path:ki,volume:1},{key:"c_cup_take_multiple_2",path:xi,volume:1},{key:"c_cup_take_multiple_3",path:wi,volume:1},{key:"c_cup_take_single_1",path:Si,volume:1},{key:"c_cup_take_single_2",path:Ti,volume:1},{key:"c_cup_take_single_3",path:Mi,volume:1},{key:"c_shake_cup_multiple_hard_1",path:Ci,volume:1},{key:"c_shake_cup_multiple_hard_2",path:Pi,volume:1},{key:"c_shake_cup_multiple_hard_3",path:Fi,volume:1},{key:"c_shake_cup_multiple_medium_1",path:Oi,volume:1},{key:"c_shake_cup_multiple_medium_2",path:Ai,volume:1},{key:"c_shake_cup_multiple_medium_3",path:Ei,volume:1},{key:"c_shake_cup_multiple_soft_1",path:Bi,volume:1},{key:"c_shake_cup_multiple_soft_2",path:Di,volume:1},{key:"c_shake_cup_multiple_soft_3",path:Ri,volume:1},{key:"c_shake_cup_single_long_1",path:ji,volume:1},{key:"c_shake_cup_single_long_2",path:Ni,volume:1},{key:"c_shake_cup_single_long_3",path:Ii,volume:1},{key:"c_shake_cup_single_short_1",path:Vi,volume:1},{key:"c_shake_cup_single_short_2",path:Hi,volume:1},{key:"c_shake_cup_single_short_3",path:Gi,volume:1},{key:"c_swirl_cup_multiple_1",path:Wi,volume:1},{key:"c_swirl_cup_multiple_2",path:Xi,volume:1},{key:"c_swirl_cup_multiple_3",path:Yi,volume:1},{key:"c_swirl_cup_multiple_4",path:Li,volume:1},{key:"c_swirl_cup_multiple_long_1",path:Ui,volume:1},{key:"c_swirl_cup_multiple_long_2",path:Ki,volume:1},{key:"c_swirl_cup_multiple_long_3",path:Qi,volume:1},{key:"c_swirl_cup_single_short_1",path:Ji,volume:1},{key:"c_swirl_cup_single_short_2",path:qi,volume:1},{key:"c_swirl_cup_single_short_3",path:Ji,volume:1}];class es extends Phaser.Renderer.WebGL.Pipelines.PostFXPipeline{constructor(e){super({game:e,name:"GrayScalePostFilter"})}onPreRender(){this.colorMatrix.blackWhite()}onDraw(e){this.drawFrame(e,this.fullFrame1),this.bindAndDraw(this.fullFrame1)}}class ts extends Phaser.Renderer.WebGL.Pipelines.PostFXPipeline{constructor(e){super({game:e,name:"BlurPostFilter",fragShader:"\n\t\t\t\t#ifdef GL_FRAGMENT_PRECISION_HIGH\n\t\t\t\t#define highmedp highp\n\t\t\t\t#else\n\t\t\t\t#define highmedp mediump\n\t\t\t\t#endif\n\t\t\t\tprecision highmedp float;\n\n\t\t\t\tuniform sampler2D uMainSampler;\n\t\t\t\tvarying vec2 outTexCoord;\n\t\t\t\tuniform vec2 uTexSize;\n\t\t\t\tuniform vec2 uOffset;\n\n\t\t\t\tvoid main (void) {\n\t\t\t\t\tvec4 c = texture2D( uMainSampler, outTexCoord );\n\t\t\t\t\tvec4 l = texture2D( uMainSampler, outTexCoord + uOffset );\n\t\t\t\t\tvec4 r = texture2D( uMainSampler, outTexCoord - uOffset );\n\n\t\t\t\t\tgl_FragColor = (1.0*c + 1.0*l + 1.0*r) / 3.0;\n\t\t\t\t}\n\t\t\t"}),this.offsetX=1.6,this.offsetY=1.6,this.lowres=!0,this.steps=2}onPreRender(){this.set2f("uTexSize",this.game.scale.width,this.game.scale.height)}onDraw(e){const t=this.lowres?this.halfFrame1:this.fullFrame1,i=this.lowres?this.halfFrame2:this.fullFrame2;this.copyFrame(e,t);const s=1/t.width*this.offsetX,a=1/t.height*this.offsetY;for(let e=0;e<this.steps;e++)this.set2f("uOffset",s,0),this.bindAndDraw(t,i),this.set2f("uOffset",0,a),this.bindAndDraw(i,t);this.bindAndDraw(t)}}class is extends Phaser.Renderer.WebGL.Pipelines.PostFXPipeline{constructor(e){super({game:e,renderTarget:!0,fragShader:"\n#define SHADER_NAME BEND_WAVES_FS\n\nprecision mediump float;\n\nuniform float     uTime;\nuniform sampler2D uMainSampler;\nvarying vec2 outTexCoord;\n\nvoid main( void )\n{\n    vec2 uv = outTexCoord;\n    uv.x += 0.02 * sin((uv.y + (uTime * 0.1)) * 30.0);\n    vec4 texColor = texture2D(uMainSampler, uv);\n    gl_FragColor = texColor;\n}\n",uniforms:["uProjectionMatrix","uMainSampler","uTime"]}),this._time=0}onPreRender(){this._time+=.005,this.set1f("uTime",this._time)}}class ss extends Phaser.Renderer.WebGL.Pipelines.PostFXPipeline{constructor(e){super({game:e,renderTarget:!0,fragShader:"\n#define SHADER_NAME BEND_WAVES_FS\n\nprecision mediump float;\n\nuniform float     uTime;\nuniform sampler2D uMainSampler;\nvarying vec2 outTexCoord;\n\nvoid main( void )\n{\n    vec2 uv = outTexCoord;\n    uv.x += 0.005 * sin((uv.y + (uTime * 0.2)) * 30.0);\n    vec4 texColor = texture2D(uMainSampler, uv);\n    gl_FragColor = texColor;\n}\n",uniforms:["uProjectionMatrix","uMainSampler","uTime"]}),this._time=0}onPreRender(){this._time+=.005,this.set1f("uTime",this._time)}}const as={m_main_music:{offset:4.266,bpm:120,loop:!0,start:5.266,end:57.266},m_main_music_light:{offset:4.266,bpm:120,loop:!0,start:5.266,end:57.266},m_city_ambience:{offset:0,bpm:135.56,loop:!0,start:.067,end:14.122},m_main_menu:{offset:.424,bpm:60}};class hs extends Phaser.Sound.WebAudioSound{constructor(e,t,i={}){if(super(e.sound,t,i),e.sound.sounds.push(this),this.myKey=t,!as[t])throw"Music data missing for: "+t;let s=as[t]||{};this.offset=s.offset,this.bpm=s.bpm,this.myLoop=s.loop||!1,this.myLoop?(this.start=s.start,this.end=s.end,this.setLoop(!0)):(this.start=this.offset,this.end=this.duration,this.setLoop(!1)),this.speed=60/this.bpm,this.maxBar=Math.round((this.end-this.start)/this.speed),this.loopSum=0}update(){if(super.update(),this.isPlaying){this.myLoop&&this.currentTime>this.end&&(this.setSeek(this.currentTime-(this.end-this.start)),this.loopSum+=this.end-this.start,this.emit("loop"));let e=this.getBarTime();e>=0&&Math.floor(e)!=Math.floor(this._prevBarTime)&&this.emit("bar",Math.floor(e)),this._prevBarTime=e}}getBarTime(){return(this.currentTime-this.offset)/this.speed}getBar(){return Math.floor(this.getBarTime())}get currentTime(){return this.seek}get totalTime(){return this.seek+this.loopSum}get barTime(){return(this.totalTime-this.offset)/this.speed}}const os=(e,t,i)=>e>=t&&e<=i;var rs;!function(e){e[e.SQUIRE=1]="SQUIRE",e[e.PEASANT=2]="PEASANT",e[e.TANK=3]="TANK",e[e.TROJAN_HORSE=4]="TROJAN_HORSE",e[e.SQUIRE_WAVE=5]="SQUIRE_WAVE",e[e.SPAWNABLE_COUNT=6]="SPAWNABLE_COUNT",e[e.TROJAN_MINION=7]="TROJAN_MINION"}(rs||(rs={}));const ns=new Map,ds=e=>(t,i,s)=>{const a=ns.get(e),h=i.getRandomRightFree(s);if(h&&null!=a){const e=new ls(t,0,0,a);return i.addEnemy(h,e),[e]}return[]};ns.set(rs.SQUIRE,{type:rs.SQUIRE,tint:16777215,minHealth:5,maxHealth:9,score:10,sprite:"enemy_squire",scale:1.2,move:(e,t)=>({i:e.i-1,j:e.j}),spawn:ds(rs.SQUIRE)}),ns.set(rs.PEASANT,Object.assign({},ns.get(rs.SQUIRE),{minHealth:2,maxHealth:4,score:5,sprite:"enemy_peasant",scale:1.15,spawn:ds(rs.PEASANT)})),ns.set(rs.TANK,Object.assign({},ns.get(rs.SQUIRE),{type:rs.TANK,minHealth:16,maxHealth:24,score:30,sprite:"enemy_tank",scale:1.3,spawn:ds(rs.TANK)})),ns.set(rs.SQUIRE_WAVE,Object.assign({},ns.get(rs.SQUIRE),{minHealth:4,maxHealth:4,score:5,spawn:(e,t)=>{const i=[],s=ns.get(rs.SQUIRE_WAVE);if(!s)return i;const a=Object.assign({},s,{minHealth:1,maxHealth:1}),h=Phaser.Math.Between(0,4);for(let o=0;o<5;o++)if(!t.grid[o][5]){const r=o==h?a:s,n=new ls(e,e.W+200,e.H/2,r);t.addEnemy({i:5,j:o},n),i.push(n)}return i}})),ns.set(rs.TROJAN_MINION,Object.assign({},ns.get(rs.PEASANT),{type:rs.TROJAN_MINION,minHealth:1,maxHealth:3,score:5,sprite:"enemy_peasant",scale:1.15,customSpawn:(e,t,i)=>{const s=ns.get(rs.TROJAN_MINION);if(!s)return;const a=[],h=t.getCell(i),o=i=>{if(t.grid[i.j][i.i])return;const o=new ls(e,h.cx,h.cy,s);o.moves=-1,t.addEnemy(i,o,!1),e.enemies.push(o),a.push(o),e.sound.play("e_jump_out",{volume:.25,delay:.3})};for(let e=i.j-1;e<=i.j+1;e++)os(e,0,4)&&o({i:i.i,j:e});return os(i.i+1,0,5)&&o({i:i.i+1,j:i.j}),a}})),ns.set(rs.TROJAN_HORSE,Object.assign({},ns.get(rs.SQUIRE),{minHealth:8,maxHealth:12,score:15,sprite:"enemy_trojan",scale:1.2,type:rs.TROJAN_HORSE,spawn:(e,t,i)=>{const s=ns.get(rs.TROJAN_HORSE),a=t.getRandomRightFree(i);if(a&&null!=s){const i=new ls(e,0,0,s);return t.addEnemy(a,i),i.on("death",(()=>{const s=ns.get(rs.TROJAN_MINION),a=i.coord;a&&s&&s.customSpawn&&s.customSpawn(e,t,a)})),[i]}return[]}}));class ls extends Phaser.GameObjects.Container{constructor(e,t,i,s){super(e,t,i),this.scene=e,e.add.existing(this),this.maxHealth=Phaser.Math.Between(s.minHealth,s.maxHealth),this.health=this.maxHealth,this.hurtTimer=0,this.deathTimer=0,this.deathDuration=1e3,this.moves=0,this.behaviour=s,this.sprite=e.add.sprite(0,26.04,s.sprite,0),this.sprite.setScale(62*s.scale/this.sprite.height),this.sprite.setTint(s.tint),this.sprite.setOrigin(.6,1),this.add(this.sprite),this.text=e.createText(24,17,25,"#303F9F",this.health.toString()),this.text.setOrigin(.6),this.text.setStroke("#FFFFFF",5),this.add(this.text)}update(e,t){if(super.update(e,t),this.hurtTimer-=t,this.hurtTimer>0||!this.alive){let t=Math.sin(.03*e)>0;this.sprite.setTint(t?16742263:this.behaviour.tint),this.sprite.setAlpha(.5),this.sprite.setOrigin(.6+.05*Math.sin(35*e/1e3),this.sprite.originY)}else this.sprite.setTint(this.behaviour.tint),this.sprite.setAlpha(1);if(!this.alive){this.deathTimer+=t;let i=this.deathTimer/this.deathDuration,s=Phaser.Math.Easing.Quintic.In(i),a=Math.max(0,1-Math.abs(1-2.5*i)),h=Phaser.Math.Easing.Sine.Out(a);this.setScale(1-s),this.sprite.setOrigin(.6+.15*h*Math.sin(100*e/1e3),this.sprite.originY);let o=Math.sin(50*e/1e3)>0;this.sprite.setTint(o?16759739:this.behaviour.tint),this.deathTimer>.95*this.deathDuration&&this.setVisible(!1)}}playAnim(e){const t=this.behaviour.sprite;this.sprite.play({key:t+"_"+e})}playIdle(){this.playAnim("idle")}playWalk(){this.playAnim("walk")}playAttack(){this.playAnim("attack")}getNextMove(e){return this.behaviour.move(e,this.moves)}move(e,t){this.moves++,this.setDepth(10+t.y/100),this.coord=e,this.scene.tweens.add({targets:this,x:{from:this.x,to:t.cx},y:{from:this.y,to:t.cy},ease:"Cubic.Out",duration:1e3})}damage(e=1){if(this.behaviour.type==rs.TROJAN_MINION&&this.moves<1)return;const t=this.health,i=Math.abs(t-this.health);this.health-=e,this.health=Math.max(this.health,0),e>0&&(this.hurtTimer=1e3,this.scene.sound.play("e_damage",{volume:.2,pan:1.1*(this.x/this.scene.W-.5)-.18,rate:Phaser.Math.RND.realInRange(.95,1.05),delay:Phaser.Math.RND.realInRange(0,.05)})),this.scene.tweens.add({targets:this.text,text:{from:t,to:this.health},ease:"Cubic.Out",duration:500+80*i,onUpdate:e=>{const t=parseFloat(this.text.text);this.text.setText(Math.floor(t).toString()),t<1&&this.text.setColor("#700")}}),this.health<=0&&(this.scene.grid.clear(this.coord),this.emit("death"))}get alive(){return this.health>0}}const cs=[{sides:6,tint:15684432,pattern:(e,t,i)=>Math.abs(e.i-t)+Math.abs(e.j-i)<=1},{sides:6,tint:6732650,pattern:(e,t,i)=>e.j==i},{sides:6,tint:4367861,pattern:(e,t,i)=>e.i==t}];class ps extends Phaser.GameObjects.Container{constructor(e,t,i,s,a){super(e,t,i),this.scene=e,e.add.existing(this),this.style=s,this.value=a,this.bounceValue=1,this.shadow=e.add.sprite(0,0,"dice_shadow"),this.shadow.setOrigin(.5,.52),this.add(this.shadow),this.sprite=e.add.sprite(0,0,"dice",6),this.sprite.setOrigin(.5,.5),this.sprite.setTint(this.style.tint),this.add(this.sprite),this.text=e.createText(0,0,25,"#000",this.value.toString()),this.text.setOrigin(.5),this.text.setVisible(!1),this.text.setStroke("#FFFFFF",5),this.add(this.text),this.lastDragSound=Date.now(),this.inStorage=!1,this.dragging=!1,this.hovering=!1,this.holdSmooth=0,this.sprite.setInteractive({hitArea:this.sprite,useHandCursor:!0,draggable:!0}).on("pointerdown",(()=>{this.bounceValue>0||(this.dragging=!0,this.emit("dragstart"),this.scene.sound.play(`h_fondle_hard_${Phaser.Math.Between(1,3)}`))}),this).on("drag",((e,t,i)=>{this.bounceValue>0||this.emit("drag",e.x,e.y)}),this).on("pointerover",(()=>{this.bounceValue>0||(this.scene.sound.play(`d_dice_tap_short_${Phaser.Math.Between(1,5)}`),this.hovering=!0)}),this).on("pointerout",(()=>{this.hovering=!1}),this)}update(e,t){super.update(e,t),this.holdSmooth+=.75*((this.dragging?1:this.hovering?.2:0)-this.holdSmooth);const i=2*this.bounceValue+.3*this.holdSmooth;this.sprite.setOrigin(.5,.6+i),this.shadow.setAlpha(.5-.2*i),this.bounceValue>0?this.sprite.setFrame(6+Math.floor(30*e/1e3)%3):this.sprite.setFrame(this.value-1)}onRelease(){this.dragging=!1,this.emit("dragend"),this.scene.sound.play(`t_place_single_short_${Phaser.Math.Between(1,5)}`)}throw(e,t){this.sprite.setScale(.9*t.width/this.sprite.width),this.shadow.setScale(1.5*t.width/this.sprite.width),this.setDepth(10+t.y/100+t.x/1e3),this.coord=e;const i=Phaser.Math.RND.between(1200,1600);this.scene.tweens.add({targets:this,x:{from:this.x,to:t.cx},y:{from:this.y,to:t.cy},ease:"Cubic.Out",duration:i,onComplete:()=>{}}),this.scene.tweens.add({targets:this,bounceValue:{from:0,to:1},ease:"Cubic.Out",duration:.25*i,onComplete:()=>{this.scene.tweens.add({targets:this,bounceValue:{from:1,to:0},ease:"Bounce.Out",duration:.75*i})}}),this.scene.addEvent(.6*i,(()=>{this.scene.sound.play(`t_throw_desk_multiple_${Phaser.Math.Between(1,5)}`)}))}move(e,t,i){this.setDepth(10+t.y+.01*t.x),this.coord=e,this.inStorage=i;const s=Date.now();s-this.lastDragSound>170&&(this.scene.sound.play(`t_sweep_single_${Phaser.Math.Between(1,6)}`),this.lastDragSound=s),this.scene.tweens.add({targets:this,x:{from:this.x,to:t.cx},y:{from:this.y,to:t.cy},ease:"Cubic.Out",duration:100})}}function ms(e,t,i){return Phaser.Display.Color.ObjectToColor(Phaser.Display.Color.Interpolate.ColorWithColor(Phaser.Display.Color.ValueToColor(e),Phaser.Display.Color.ValueToColor(t),255,255*i)).color}class us extends Phaser.GameObjects.Container{constructor(e){super(e,0,0),this.scene=e,this.scene.add.existing(this),this.bg=this.scene.add.image(391,181,"board_border"),this.bg.setOrigin(0),this.add(this.bg),this.grid=[],this.gridText=[],this.gridTiles=[],this.gridHighlights=[];for(let e=0;e<5;e++){this.grid.push([]),this.gridText.push([]),this.gridTiles.push([]),this.gridHighlights.push([]);for(let t=0;t<6;t++)this.newCell(t,e)}this.newCell(6,0),this.updateGrid()}newCell(e,t){this.grid[t].push(null);let i=this.getCell({i:e,j:t}),s=this.scene.add.image(i.cx,i.cy,"board_tile");s.setScale(i.width/s.width),this.add(s),this.gridTiles[t][e]=s;let a=this.scene.add.rectangle(i.cx,i.cy,i.width,i.height+1,16777113,1);this.add(a),this.gridHighlights[t][e]=a;const h=this.scene.createText(i.x+i.width,i.y,18,"#B71C1C","");h.setStroke("#FFFFFF",3),h.setOrigin(1.05,.15),this.add(h),this.gridText[t][e]=h,this.isStorage({i:e,j:t})&&(a.setAlpha(0),h.setFontSize(12),h.setColor("#FFFFFF"),h.setStroke("#222229",3),h.setText("Storage"),h.setOrigin(.5,.5),h.x-=i.width/2)}update(e,t){for(let t=0;t<5;t++)for(let i=0;i<6;i++)this.gridHighlights[t][i].setAlpha(0),this.getHighlight({i,j:t})&&this.gridHighlights[t][i].setAlpha(.4+.1*Math.sin(10*e))}getCell(e){let t=400+80*e.i+2,i=190+62*e.j+2;return 6==e.i&&(t=290,i=192),{x:t,y:i,cx:t+38,cy:i+29,width:76,height:58}}getClosestCoord(e,t,i){let s=null,a=1/0;const h=(h,o,r)=>{const n=Math.abs(e-o.cx)+Math.abs(t-o.cy);n<a&&(!r||r==i)&&(a=n,s=h)};for(let e=0;e<5;e++)for(let t=0;t<6;t++){const i={i:t,j:e};h(i,this.getCell(i),this.grid[e][t])}const o={i:6,j:0};return h(o,this.getCell(o),this.grid[0][6]),s}getRandomFree(){let e=[];for(let t=0;t<5;t++)for(let i=0;i<6;i++)this.grid[t][i]||e.push({i,j:t});return e.length>0?Phaser.Math.RND.pick(e):null}getRandomRightFree(e){let t=[];for(let i=0;i<5;i++)this.grid[i][5]||e!=i&&void 0!==e||t.push({i:5,j:i});return t.length>0?Phaser.Math.RND.pick(t):null}getHighlight(e){for(let t=0;t<5;t++)for(let i=0;i<6;i++)if(this.grid[t][i]instanceof ps&&this.grid[t][i].style.pattern(e,i,t)&&(this.grid[t][i].hovering||this.grid[t][i].dragging))return!0;return!1}getDamage(e){let t=0;for(let i=0;i<5;i++)for(let s=0;s<6;s++)this.grid[i][s]instanceof ps&&this.grid[i][s].style.pattern(e,s,i)&&(t+=this.grid[i][s].value);return t}getDamageGrid(){let e=[];for(let t=0;t<5;t++){e.push([]);for(let i=0;i<6;i++)e[t].push(this.getDamage({i,j:t}))}return e}updateGrid(){for(let e=0;e<5;e++)for(let t=0;t<6;t++){this.getCell({i:t,j:e});const i=this.getDamage({i:t,j:e}),s=((i>0?2:0)+Math.min(i,8))/10;this.gridText[e][t].setText(i.toString()),this.gridText[e][t].setVisible(i>0),this.gridTiles[e][t].setTint(ms(16777215,16711680,s))}}explodeGrid(){for(let e=0;e<5;e++)for(let t=0;t<6;t++){const i=this.getCell({i:t,j:e}),s=this.getDamage({i:t,j:e}),a=Math.min(s,10)/10;s>0&&this.scene.particles.createExplosion(i.cx,i.cy+.4*i.height,.5+.6*a,.5+.3*a,(t+e)%2==0)}}needMoreEnemies(){for(let e=0;e<5;e++)for(let t=0;t<5;t++)if(this.grid[e][t]instanceof ls)return!1;return!0}addDice(e,t){this.grid[e.j][e.i]=t,t.throw(e,this.getCell(e)),this.updateGrid()}addEnemy(e,t,i=!0){if(i){const i=this.getCell(e);t.x=this.scene.W+20,t.y=i.cy}this.grid[e.j][e.i]=t,t.move(e,this.getCell(e)),this.updateGrid()}clear(e){e&&(this.grid[e.j][e.i]=null)}snap(e,t,i){const s=this.getClosestCoord(e,t,i);if(s&&i.coord){const e=this.getCell(s);i.coord.i==s.i&&i.coord.j==s.j||(this.grid[s.j][s.i]=i,this.grid[i.coord.j][i.coord.i]=null,this.updateGrid(),i.move(s,e,this.isStorage(s)))}}isStorage(e){return 6==e.i&&0==e.j}moveEnemies(){for(let e=1;e<6;e++)for(let t=0;t<5;t++)if(this.grid[t][e]instanceof ls){const i=this.grid[t][e],s=i.getNextMove({i:e,j:t});this.grid[s.j][s.i]||(this.grid[s.j][s.i]=i,this.grid[t][e]=null,i.move(s,this.getCell(s)))}}}class fs extends Phaser.GameObjects.Container{constructor(e,t,i,s,a,h,o,r=1){super(e,t,i),e.add.existing(this),this.scene=e,this.radius=h,this.width=Math.max(s,2*h),this.height=Math.max(a,2*h),this.color=o,this.origin=new Phaser.Math.Vector2(.5,.5),this.setAlpha(r),this.context=this.scene.add.graphics({x:0,y:0}),this.add(this.context),this.updatePolygon()}setWidth(e){this.width=Math.max(e,2*this.radius),this.updatePolygon()}setHeight(e){this.height=Math.max(e,2*this.radius),this.updatePolygon()}setRadius(e){this.radius=e,this.updatePolygon()}setColor(e){this.color=e,this.updatePolygon(!1)}setOrigin(e,t){void 0===t&&(t=e),this.origin.x=e,this.origin.y=t,this.updatePolygon()}updatePolygon(e=!0){if(e){let e=[],t=16;for(let i=0;i<4;i++){let s=Math.sign(Math.cos(i*Math.PI/2+.1)),a=Math.sign(Math.sin(i*Math.PI/2+.1));for(let h=0;h<t;h++){let o=Math.cos(i*Math.PI/2+h/(t-1)*Math.PI/2),r=Math.sin(i*Math.PI/2+h/(t-1)*Math.PI/2);e.push({x:(.5-this.origin.x)*this.width+s*(this.width/2-this.radius)+this.radius*o,y:(.5-this.origin.y)*this.height+a*(this.height/2-this.radius)+this.radius*r})}}this.points=e}this.context.clear(),this.context.fillStyle(this.color,1),this.context.fillPoints(this.points,!0,!0)}}const _s=24;class gs extends Phaser.GameObjects.Container{constructor(e){super(e),this.scene=e,e.add.existing(this);let t=.021*e.W,i=.83*e.H,s=new fs(e,t-5-3,i+20,236,1.4*_s+6,17,5847337);s.setOrigin(0,.5),this.add(s);let a=new fs(e,t-5,i+20,230,1.4*_s,14,13345151);a.setOrigin(0,.5),this.add(a);let h=e.createText(t+70,i+3,_s,"#000","Score");h.setOrigin(.5,0),h.setStroke("#FFFFFF",3),this.add(h),this.score=e.createText(t+140,i+5,_s,"#FFF","0"),this.score.setOrigin(0,0),this.add(this.score),i+=43.2;let o=new fs(e,t-5-3,i+20,236,1.4*_s+6,14,5847337);o.setOrigin(0,.5),this.add(o);let r=new fs(e,t-5,i+20,230,1.4*_s,14,13345151);r.setOrigin(0,.5),this.add(r);let n=e.createText(t+70,i+3,_s,"#000","High score");n.setOrigin(.5,0),n.setStroke("#FFFFFF",3),this.add(n),this.highscore=e.createText(t+140,i+5,_s,"#FFF","0"),this.highscore.setOrigin(0,0),this.add(this.highscore),this.scoreBounce=0,this.setScore(0,0)}update(e,t){this.scoreBounce+=10*(0-this.scoreBounce)*t,this.score.setScale(1+.15*this.scoreBounce,1-.05*this.scoreBounce)}setScore(e,t){this.score.setText(e.toString().padStart(0,"0")),this.highscore.setText(t.toString().padStart(0,"0")),this.scoreBounce=1}}class bs extends Phaser.GameObjects.Sprite{constructor(e){super(e,0,0,""),this.setVisible(!1),this.myType="",this.pos=new Phaser.Math.Vector2(0,0),this.vel=new Phaser.Math.Vector2(0,0),this.acc=new Phaser.Math.Vector2(0,0),this.offset=new Phaser.Math.Vector2(0,0),this.life=0,this.lifeTime=0}init(e,t,i){this.x=e,this.y=t,this.myType=i,this.setTexture(i),this.setVisible(!0),this.setTint(16777215),this.setAngle(0),this.setScale(1),this.setOrigin(.5),this.pos.set(e,t),this.vel.reset(),this.acc.reset(),this.offset.reset(),this.life=0}shell(e,t,i){this.init(e,t,"shell"),this.setTint(i),this.setAngle(360*Math.random()),this.setData("scale",1-.5*Math.random()),this.setScale(this.getData("scale")),this.vel.setToPolar(2*Math.PI*Math.random(),20+40*Math.random()),this.setData("airtime",.4+.3*Math.random()),this.lifeTime=1.5+1*Math.random()}sweat(e,t,i){this.init(e,t,"sweat"),this.setAngle(360*Math.random()),this.setData("scale",20*(1-.5*Math.random())),this.setScale(this.getData("scale")),this.setFrame(Math.floor(4*Math.random())),this.vel.setToPolar(-0*Math.PI+.2*Math.PI*Math.random(),20+40*Math.random()),i||(this.vel.x*=-1),this.pos.x+=4*Math.random()-2+(i?2:-2),this.pos.y+=4*Math.random()-2-3,this.setData("airtime",.4+.3*Math.random()),this.lifeTime=.4+.4*Math.random()}explosion(e,t,i,s,a){this.init(e,t,"fire_explosion"),this.setScale((a?1:-1)*i,i),this.setFrame(0),this.setOrigin(110/214,208/214),this.lifeTime=s*(.8+.2*Math.random())}update(e,t){if("shell"==this.myType){const e=this.getData("airtime");if(this.life>e){this.vel.reset(),this.acc.reset(),this.offset.y=5;let t=1-(this.life-e)/(this.lifeTime-e);this.setScale(t*this.getData("scale"))}else this.offset.y=-10*Math.sin(this.life/e*Math.PI)+5*this.life/e}if("sweat"==this.myType){const e=this.getData("airtime");if(this.life>e){this.vel.reset(),this.acc.reset(),this.offset.y=5;let t=1-(this.life-e)/(this.lifeTime-e);this.setScale(t*this.getData("scale"))}else this.offset.y=-10*Math.sin(this.life/e*Math.PI)+5*this.life/e}if("fire_explosion"==this.myType){let e=Math.floor(6*Math.pow(this.life/this.lifeTime,.65));this.setFrame(e)}this.vel.x+=this.acc.x*t,this.vel.y+=this.acc.y*t,this.pos.x+=this.vel.x*t,this.pos.y+=this.vel.y*t,this.x=this.pos.x+this.offset.x,this.y=this.pos.y+this.offset.y,this.life+=t,this.life>this.lifeTime&&this.setVisible(!1)}}class ys extends Phaser.GameObjects.Container{constructor(e){super(e,0,0),e.add.existing(this),this.particles=[],this.index=0;for(let t=0;t<1e3;t++){let t=new bs(e);this.add(t),this.particles.push(t)}}update(e,t){this.particles.forEach((i=>{i.visible&&i.update(e,t)}))}getFreeParticle(){for(let e=0;e<50;e++){this.index=(this.index+1)%1e3;let e=this.particles[this.index];if(!e.visible)return e}return null}getFreeParticles(e){let t=[];for(let i=0;i<e;i++){let e=this.getFreeParticle();e&&t.push(e)}return t}createShells(e,t,i,s){this.getFreeParticles(i).forEach((i=>{i.shell(e,t,s)}))}createSweat(e,t,i){this.getFreeParticles(1).forEach((s=>{s.sweat(e,t,i)}))}createExplosion(e,t,i,s,a){this.getFreeParticles(1).forEach((h=>{h.explosion(e,t,i,s,a)}))}}class vs extends Phaser.GameObjects.Container{constructor(e,t,i){super(e,t,i),this.scene=e,e.add.existing(this),this._hold=!1,this.blocked=!1,this.liftSmooth=0,this.holdSmooth=0,this.aliveValue=0}bindInteractive(e,t=!1){return e.removeInteractive(),e.setInteractive({useHandCursor:!0,draggable:t}).on("pointerout",this.onOut,this).on("pointerover",this.onOver,this).on("pointerdown",this.onDown,this).on("pointerup",this.onUp,this).on("dragstart",this.onDragStart,this).on("drag",this.onDrag,this).on("dragend",this.onDragEnd,this),e}get hold(){return this._hold}set hold(e){e!=this._hold&&(this.tween&&this.tween.stop(),this.tween=e?this.scene.tweens.add({targets:this,holdSmooth:{from:0,to:1},ease:"Cubic.Out",duration:100}):this.scene.tweens.add({targets:this,holdSmooth:{from:1,to:0},ease:e=>Phaser.Math.Easing.Elastic.Out(e,1.5,.5),duration:500})),this._hold=e}onOut(e,t){this.hold=!1}onOver(e,t,i,s){}onDown(e,t,i,s){this.hold=!0,this.blocked=!1}onUp(e,t,i,s){this.hold&&!this.blocked&&(this.hold=!1,this.emit("click"))}onDragStart(e,t,i){}onDrag(e,t,i){}onDragEnd(e,t,i,s){}isInsidePlayingField(){return!1}get alive(){return!1}block(){this.blocked=!0}}class ks extends vs{constructor(e,t,i){super(e,t,i),this.scene=e,e.add.existing(this),this.enabled=!0,this.fire=e.add.sprite(0,-30,"attack_button_fire",0),this.fire.setScale(.6),this.add(this.fire),this.sprite=e.add.sprite(0,0,"attack_button",0),this.sprite.setScale(.3),this.bindInteractive(this.sprite,!1),this.add(this.sprite),this.text=e.createText(.5,.5,20,"#FFF","Attack"),this.text.setOrigin(.5),this.text.setStroke("#000",4),this.add(this.text)}update(e,t){this.sprite.setScale(.3-.02*this.holdSmooth),this.fire.setFrame(Math.floor(10*e/1e3)%8),this.sprite.setFrame(this.hold?1:0)}}class xs extends vs{constructor(e,t,i,s){super(e,t,i),this.scene=e,e.add.existing(this),this.active=!0,this.outerCircle=this.scene.add.ellipse(0,0,43,43,1118481),this.bindInteractive(this.outerCircle,!1),this.add(this.outerCircle),this.circle=this.scene.add.ellipse(0,0,39,39,15892888),this.add(this.circle),this.sprite=e.add.sprite(0,0,s,this.active?0:1),this.sprite.setScale(35/this.sprite.width),this.add(this.sprite)}update(e,t){this.setScale(1-.1*this.holdSmooth)}toggle(){this.active=!this.active,this.sprite.setFrame(this.active?0:1),this.circle.fillColor=this.active?15892888:11583173}}class ws extends Phaser.GameObjects.Container{constructor(e,t,i){super(e,t,i),this.scene=e,e.add.existing(this),this.maxHealth=6,this.health=this.maxHealth,this.hurtTimer=0,this.deathTimer=0,this.deathDuration=1e3,this.sprite=e.add.sprite(0,0,"dragon_idle",0),this.sprite.setOrigin(0,.5),e.containToScreen(this.sprite),this.add(this.sprite),this.text=e.createText(0,0,25,"#000",""),this.text.setOrigin(.5),this.text.setStroke("#FFFFFF",5),this.text.setVisible(!1),this.add(this.text),this.sprite.play({key:"dragon_idle"}),this.sprite.on("animationcomplete",(()=>{"dragon_prepare"==this.sprite.anims.currentAnim.key?(this.emit("throw"),this.sprite.play({key:"dragon_throw"})):"dragon_throw"==this.sprite.anims.currentAnim.key&&this.sprite.play({key:"dragon_idle"})})),this.healthCont=e.add.container(),this.healthCont.setVisible(!1),this.add(this.healthCont);const s=.2*this.scene.W,a=-.44*this.scene.H;this.healthBox=e.add.image(s,a,"healthbar"),this.healthBox.setScale(.4),this.healthCont.add(this.healthBox);const h=this.healthBox.displayWidth-5,o=this.healthBox.displayHeight-5;this.healthBg=e.add.rectangle(this.healthBox.x-h/2,this.healthBox.y-o/2,h,o,0),this.healthBg.setOrigin(0),this.healthBg.setAlpha(.6),this.healthCont.add(this.healthBg),this.healthBar=e.add.rectangle(this.healthBox.x-h/2,this.healthBox.y-o/2,h,o,0),this.healthBar.setOrigin(0),this.healthCont.add(this.healthBar),this.healthCont.bringToTop(this.healthBox),this.healthFlash=0}update(e,t){if(super.update(e,t),this.hurtTimer-=t,this.hurtTimer>0||!this.alive){let t=Math.sin(.03*e)>0;this.sprite.setTint(t?16742263:16777215),this.sprite.setAlpha(.5)}else this.sprite.setTint(16777215),this.sprite.setAlpha(1);if(!this.alive){this.deathTimer+=t;let i=this.deathTimer/this.deathDuration,s=Phaser.Math.Easing.Quintic.In(i),a=Math.max(0,1-Math.abs(1-2.5*i)),h=Phaser.Math.Easing.Sine.Out(a);this.setScale(1-s),this.sprite.setOrigin(0,.5+.03*h*Math.sin(100*e));let o=Math.sin(50*e)>0;this.sprite.setTint(o?16759739:16777215),this.deathTimer>.95*this.deathDuration&&this.setVisible(!1)}this.healthFlash+=-.3*this.healthFlash,this.healthBox.setTint(1122867),this.healthBar.fillColor=ms(14162784,16777215,this.healthFlash),this.healthBg.fillColor=0}throw(){this.sprite.play({key:"dragon_prepare"})}damage(e=1){this.healthCont.setVisible(!0),this.health-=e,this.health=Math.max(this.health,0),this.hurtTimer=1e3,this.healthFlash=1,this.sprite.play({key:"dragon_hurt"}),this.scene.sound.play("d_damage"),this.scene.tweens.add({targets:this.healthBar,duration:200,ease:"Cubic.Out",width:{from:this.healthBar.width,to:Math.max(this.health/this.maxHealth*(this.healthBox.displayWidth-5)-5,this.healthBox.getBounds().left)}}),this.text.setText(this.health.toString()),this.health<=0&&(this.emit("death"),this.healthCont.setVisible(!1),this.scene.tweens.add({targets:this.scene.bg_shadow,delay:300,duration:700,alpha:{from:1,to:0}}))}heal(e=1){this.health+=e,this.health=Math.min(this.health,this.maxHealth),this.healthFlash=1,this.scene.tweens.add({targets:this.healthBar,duration:200,ease:"Cubic.Out",width:{from:this.healthBar.width,to:Math.max(this.health/this.maxHealth*(this.healthBox.displayWidth-5),this.healthBox.getBounds().left)}}),this.text.setText(this.health.toString())}get alive(){return this.health>0}}const Ss=rs.SQUIRE,Ts=rs.TANK,Ms=rs.SQUIRE_WAVE,Cs=rs.TROJAN_HORSE,Ps=rs.PEASANT,Fs=(e,t)=>({type:e,y:t}),Os=new Array(20).fill({group:[]}),As=[{group:[Fs(Ps,2)],event:e=>{e.setStageName("Move the dice to attack")}},...Os,{group:[Fs(Ps,3)]},{group:[Fs(Ps,1),Fs(Ps,3)]},{group:[Fs(Ps,1),Fs(Ps,4)]},{group:[Fs(Ps,0),Fs(Ps,3)]},{group:[Fs(Ps),Fs(Ps)],optional:!0},...Os,{group:[Fs(Ss,2)],event:e=>{e.setStageName("Brittle confidence")}},{group:[Fs(Ss,1),Fs(Ss,3)]},{group:[Fs(Ps,0),Fs(Ss,2),Fs(Ps,4)]},{group:[Fs(Ss,1)]},{group:[Fs(Ps,2),Fs(Ps,3)]},{group:[Fs(Ps),Fs(Ps)],optional:!0},{group:[Fs(Ps)],optional:!0},...Os,{group:[Fs(Ts,2)],event:e=>{e.setStageName("Tough meat")}},{group:[Fs(Ps,0),Fs(Ps,4)]},{group:[Fs(Ts,1),Fs(Ss,3)]},{group:[Fs(Ss,0),Fs(Ss,2),Fs(Ss,4)]},{group:[Fs(Ps,1),Fs(Ps,3)],optional:!0},...Os,{group:[Fs(Ss,1),Fs(Ss,3)],event:e=>{e.setStageName("All out attack")}},{group:[Fs(Ms)]},{group:[Fs(Ss,0),Fs(Ps,2),Fs(Ss,4)]},{group:[Fs(Ps,1),Fs(Ts,2),Fs(Ps,3)]},{group:[Fs(Ss,0),Fs(Ss,4)]},{group:[Fs(Ss,0)],optional:!0},{group:[Fs(Ps),Fs(Ps)],optional:!0},{group:[Fs(Ps),Fs(Ps)],optional:!0},...Os,{group:[Fs(Cs,2)],event:e=>{e.setStageName("Gift of peace")}},{group:[Fs(Ps,1),Fs(Ps,3)]},{group:[Fs(Ps,0),Fs(Ss,3)]},{group:[Fs(Cs,1)]},{group:[Fs(Cs,3),Fs(Ps,0)]},{group:[Fs(Ss,1),Fs(Ss,4)]},{group:[Fs(Ps)],optional:!0},...Os,{group:[Fs(Ps,1),Fs(Ps,3)],event:e=>{e.setStageName("Peasant party")}},{group:[Fs(Ps),Fs(Ps),Fs(Ps),Fs(Ps),Fs(Ps)]},{group:[Fs(Cs,1),Fs(Ps,4)]},{group:[Fs(Cs,3),Fs(Ps,0)]},{group:[Fs(Ps,2)]},{group:[Fs(Ps,0),Fs(Cs,2),Fs(Ps,4)]},{group:[Fs(Ss)]},{group:[Fs(Ss),Fs(Ps)],optional:!0},{group:[Fs(Ps)],optional:!0},...Os,{group:[Fs(Ts,1),Fs(Ts,3)],event:e=>{e.setStageName("The king's platter")}},{group:[Fs(Ss,1),Fs(Ss,2),Fs(Ss,3)]},{group:[]},{group:[Fs(Ss,1),Fs(Ts,2),Fs(Ss,3)]},{group:[Fs(Ss,0),Fs(Ss,4)]},{group:[Fs(Cs,1),Fs(Cs,3)]},{group:[Fs(Ss,2)]},{group:[]},{group:[Fs(Ms)]},{group:[Fs(Ps,1),Fs(Ps,3)]},{group:[Fs(Ms)]},{group:[Fs(Ps),Fs(Ps)],optional:!0},{group:[Fs(Ps),Fs(Ps)],optional:!0},{group:[Fs(Ps)],optional:!0},...Os,{group:[Fs(Ps)],event:e=>{e.setStageName("Endless food")}}];var Es;!function(e){e[e.ThrowDice=0]="ThrowDice",e[e.MoveDice=1]="MoveDice",e[e.DamagePhase=2]="DamagePhase",e[e.MovementPhase=3]="MovementPhase",e[e.AttackPhase=4]="AttackPhase",e[e.GameOverPhase=5]="GameOverPhase"}(Es||(Es={}));var Bs=i(895),Ds=i(34),Rs=i(836),js=i(790);"web"!=Bs.dV.getPlatform()&&(Ds.A_.setOverlaysWebView({overlay:!0}),Ds.A_.setStyle({style:Ds.bg.Dark}),js.v.setColor({color:"#000000",darkButtons:!1}),Rs.K.injectCSSVariables());const Ns={type:Phaser.WEBGL,width:960,height:540,scale:{mode:Phaser.Scale.FIT},scene:[class extends s{constructor(){super({key:"PreloadScene"})}init(){let e=this.renderer;e.pipelines&&(e.pipelines.addPostPipeline("GrayScalePostFilter",es),e.pipelines.addPostPipeline("BlurPostFilter",ts),e.pipelines.addPostPipeline("BendWaves",is),e.pipelines.addPostPipeline("BendWaves2",ss))}preload(){this.cameras.main.setBackgroundColor(0);let e=.5*this.W,t=this.CX-e/2,i=this.CY,s=(this.add.rectangle(t,i,e,4,6710886).setOrigin(0,.5),this.add.rectangle(t,i,1,8,14540253).setOrigin(0,.5));this.createText(t,i,16,"#DDDDDD","Loading...").setOrigin(0,1.5),this.load.on("progress",(t=>{s.width=t*e}));for(let e of $i)this.load.image(e.key,e.path);for(let e of zi)this.load.spritesheet(e.key,e.path,{frameWidth:e.width,frameHeight:e.height});for(let e of Zi)this.load.audio(e.key,e.path)}create(){this.fade(!0,100,0),this.addEvent(110,(()=>{this.scene.start("MenuScene")}))}},class extends s{constructor(){super({key:"MenuScene"})}create(){this.fade(!1,200,0),this.bg=this.add.image(this.CX,this.CY,"cover_background_orange"),this.containToScreen(this.bg),this.dragon=this.add.image(this.CX,this.CY,"cover_body"),this.containToScreen(this.dragon),this.roof=this.add.image(this.CX,this.CY,"cover_roof"),this.containToScreen(this.roof),this.hands=this.add.image(this.CX,this.CY,"cover_hands"),this.containToScreen(this.hands),this.diceBlue=this.add.image(this.CX,this.CY,"cover_dice_blue"),this.containToScreen(this.diceBlue),this.diceGreen=this.add.image(this.CX,this.CY,"cover_dice_green"),this.containToScreen(this.diceGreen),this.diceRed=this.add.image(this.CX,this.CY,"cover_dice_red"),this.containToScreen(this.diceRed),this.knights=this.add.image(this.CX,this.CY,"cover_knights"),this.containToScreen(this.knights),this.dragon.setVisible(!1),this.dragon.setAlpha(0),this.diceGreen.setAlpha(0),this.diceBlue.setAlpha(0),this.diceRed.setAlpha(0),this.dragon.y+=300,this.roof.y+=50,this.hands.y+=50,this.title=this.createText(this.CX,this.H-75,60,"#000","Fire and Dice"),this.title.setOrigin(.5,1),this.title.setStroke("#FFF",8),this.title.setVisible(!1),this.title.setAlpha(0),this.subtitle=this.createText(this.CX,this.H-50,35,"#000","Tap to start"),this.subtitle.setOrigin(.5),this.subtitle.setStroke("#FFF",4),this.subtitle.setVisible(!1),this.subtitle.setAlpha(0),this.tap=this.createText(this.CX,this.CY,35,"#000","Tap to focus"),this.tap.setOrigin(.5),this.tap.setAlpha(-1),this.tap.setStroke("#FFF",4),this.credits=this.add.container(0,0),this.credits.setVisible(!1),this.credits.setAlpha(0);let e=this.createText(7,4,14,"#c2185b","GMTK Game Jam 2022\n\n@Golenchu\n@ArcticFqx\n@LuxxArt\n@KonixKun\n@MatoCookies\nKiu\nLumie\nWilon");e.setStroke("#FFF",6),e.setLineSpacing(0),this.credits.add(e);let t=this.createText(120,4,14,"#c2185b","\n\ncode\ncode\nart\nart\nmusic\nsound\nart\nconcept");t.setStroke("#FFF",6),t.setLineSpacing(0),this.credits.add(t),this.musicTitle||(this.musicTitle=new hs(this,"m_main_menu",{volume:.4}),this.musicTitle.on("bar",this.onBar,this),this.musicTitle.on("beat",this.onBeat,this)),this.musicTitle.play(),this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE).on("down",this.progress,this),this.input.on("pointerdown",(e=>{0==e.button&&this.progress()}),this),this.isStarting=!1}update(e,t){this.dragon.visible?(this.dragon.y+=.02*(this.CY-this.dragon.y),this.roof.y+=.025*(this.CY-this.roof.y),this.hands.y+=.025*(this.CY-this.hands.y),this.roof.x+=.01*(this.CX+6*Math.cos(.4*e/1e3)-this.roof.x),this.hands.x+=.01*(this.CX+7*Math.cos(.4*e/1e3)-this.hands.x),this.diceBlue.x+=.03*(this.CX+5*Math.sin(e/1e3+Math.PI/4)-this.diceBlue.x),this.diceGreen.x+=.03*(this.CX-5*Math.sin(e/1e3)-this.diceGreen.x),this.diceRed.x+=.03*(this.CX-7*Math.sin(e/1e3+Math.PI/3)-this.diceGreen.x),this.diceBlue.y+=.03*(this.CY+10*Math.sin(.6*e/1e3+Math.PI/4)-this.diceBlue.y),this.diceGreen.y+=.03*(this.CY-10*Math.sin(.6*e/1e3)-this.diceGreen.y),this.diceRed.y+=.03*(this.CY-7*Math.sin(.6*e/1e3+Math.PI/3)-this.diceGreen.y),this.knights.x+=.01*(this.CX+15*Math.cos(1.6*e/1e3)-this.knights.x),this.dragon.alpha+=.03*(1-this.dragon.alpha),this.diceGreen.alpha+=.02*(1-this.diceGreen.alpha),this.diceBlue.alpha+=.02*(1-this.diceBlue.alpha),this.diceRed.alpha+=.02*(1-this.diceRed.alpha),this.title.alpha+=.02*((this.title.visible?1:0)-this.title.alpha),this.subtitle.alpha+=.02*((this.subtitle.visible?1:0)-this.subtitle.alpha),this.credits.visible&&(this.credits.alpha+=.02*(1-this.credits.alpha))):(this.tap.alpha+=.01*(1-this.tap.alpha),this.musicTitle.seek>0&&(this.dragon.setVisible(!0),this.tap.setVisible(!1))),this.subtitle.setScale(1+.02*Math.sin(5*e/1e3)),this.isStarting&&this.subtitle.setAlpha(.6+.4*Math.sin(50*e/1e3))}progress(){this.dragon.visible?this.subtitle.visible?this.isStarting||(this.sound.play("m_slice",{volume:.3}),this.sound.play("u_attack_button",{volume:.5}),this.isStarting=!0,this.musicTitle.seek<16.52&&(this.musicTitle.setSeek(16.52),this.musicTitle.setVolume(this.musicTitle.volume/2)),this.flash(3e3,16777215,.6),this.addEvent(1e3,(()=>{this.fade(!0,1e3,0),this.addEvent(1050,(()=>{this.musicTitle.stop(),this.scene.start("GameScene")}))}))):(this.title.setVisible(!0),this.title.setAlpha(1),this.subtitle.setVisible(!0),this.subtitle.setAlpha(1)):this.onBar(1)}onBar(e){e>=2&&this.title.setVisible(!0),e>=4&&(this.subtitle.setVisible(!0),this.credits.setVisible(!0))}onBeat(e){}},class extends s{constructor(){super({key:"OverworldScene"})}init(e){this.level=e.level}create(){this.fade(!1,0==this.level?2e3:500,16777215),this.cameras.main.setBackgroundColor(8108007),this.introPlaying=!1,this.myTweens=[],this.clouds1=this.add.image(0,0,"bg_clouds"),this.clouds2=this.add.image(0,0,"bg_clouds"),this.clouds1.setOrigin(0),this.clouds2.setOrigin(0),this.volcano=this.add.image(this.CX,this.CY,"bg_day"),this.fitToScreen(this.clouds1),this.fitToScreen(this.clouds2),this.fitToScreen(this.volcano),this.player=this.add.image(this.CX,this.CY,"mapplayer",0),this.player.setOrigin(.5,.7),this.player.setDepth(10),this.graphics=this.add.graphics(),this.graphics.lineStyle(1,15658717,1),this.graphics.fillStyle(15658717,1),this.title=this.createText(this.CX,.43*this.H,120,"#FA4","Fire and Dice").setOrigin(.5).setStroke("#732",6),this.title.setPostPipeline(ss),this.title.setVisible(!1),this.desc=this.createText(this.CX,.65*this.H,54,"#FFF").setOrigin(.5),this.desc.setText("Tap to play"),this.desc.setVisible(!1);let e=[{x:160,y:154},{x:86,y:120},{x:214,y:90},{x:158,y:38}];this.points={},this.curves={},e.forEach(((t,i)=>{if(this.points[i]=[],this.level>0&&this.points[i].push({x:t.x,y:t.y,radius:5}),i>0){let s=e[i-1],a=new Phaser.Curves.CubicBezier(new Phaser.Math.Vector2(t.x,t.y),new Phaser.Math.Vector2(t.x,t.y+60),new Phaser.Math.Vector2(s.x,s.y-60),new Phaser.Math.Vector2(s.x,s.y));this.curves[i]=a,a.getLength();let h=a.getLengths(1e3),o=a.getPoints(1e3),r=12;for(let e=0;e<h.length;e++)h[e]>r&&(this.points[i].push({x:Math.floor(o[e].x),y:Math.floor(o[e].y),radius:2}),r+=12)}this.points[i].reverse()})),this.level>0?(this.player.x=e[this.level-1].x,this.player.y=e[this.level-1].y):(this.player.x=e[this.level].x,this.player.y=e[this.level].y+40);for(let e=0;e<this.level;e++)this.points[e].forEach(((e,t)=>{this.graphics.fillCircle(e.x,e.y,e.radius)}));0==this.level?this.showIntroAnimation():this.addEvent(1e3,this.showStageAnimation,this),this.input.keyboard.on("keydown-ESC",(()=>{this.skip(),this.level<4&&this.scene.start("GameScene",{level:this.level})}),this),this.input.keyboard.on("keydown-SPACE",this.skip,this),this.input.on("pointerdown",this.skip,this)}update(e,t){const i=Math.sin(10*e/1e3)>0;this.clouds1.x=20*e/1e3%this.W,this.clouds2.x=this.clouds1.x-this.W,this.player.setFrame(i?0:1),this.victory&&this.victory.setScale(1+.1*Math.sin(5*e/1e3))}showIntroAnimation(){this.introPlaying=!0,this.clouds1.y+=80,this.clouds2.y+=80,this.volcano.y+=300,this.myTweens.push(this.tweens.add({targets:[this.clouds1,this.clouds2],y:"-=80",ease:"Cubic.InOut",duration:5e3,delay:0}));let e=this.tweens.add({targets:[this.volcano],y:"-=300",ease:"Cubic.InOut",duration:5e3,delay:0});this.myTweens.push(e),e.on("stop",this.revealTitle,this),e.on("complete",this.revealTitle,this)}revealTitle(){this.flash(1e3,16777215),this.title.setVisible(!0),this.desc.setVisible(!0),this.introPlaying=!1}showStageAnimation(){if(this.level>3)return this.flash(1e3,16777215),void(this.victory=this.createText(this.CX,this.CY,60,"#F00","VICTORY").setOrigin(.5).setStroke("#FF0",6));this.points[this.level].forEach(((e,t)=>{this.addEvent(200*t,(()=>{this.graphics.fillCircle(e.x,e.y,e.radius)}))}));const e=200*this.points[this.level].length;let t=this.curves[this.level];if(t){let i=this.tweens.add({targets:this,timer:{from:0,to:1},duration:e,delay:e});i.on("update",((e,i,s,a,h)=>{let o=t.getPoint(1-a);this.player.x=o.x,this.player.y=o.y}),this),i.on("complete",this.progress,this)}else this.tweens.add({targets:this.player,y:"-=40",duration:1e3,delay:e+500}).on("complete",this.progress,this)}skip(){this.introPlaying?this.myTweens.forEach((e=>{e.stop(1)})):this.title.visible&&(this.title.setVisible(!1),this.desc.setVisible(!1),this.showStageAnimation()),this.cameras.main.fadeEffect.reset()}progress(){this.addEvent(500,(()=>{this.fade(!0,1e3,0),this.addEvent(550,(()=>{this.scene.start("GameScene",{level:this.level})}))}))}},class extends s{constructor(){super({key:"GameScene"})}init(e){}create(){this.fade(!1,1e3,0),this.round=0,this.state=Es.MovementPhase,this.initAnimations(),this.cameras.main.resetPostPipeline();let e=this.add.image(this.CX,this.CY,"bg_town");this.containToScreen(e),this.bg_shadow=this.add.image(this.CX,this.CY,"bg_shadow"),this.containToScreen(this.bg_shadow);let t=this.add.image(this.CX,this.CY,"fg_town");this.containToScreen(t),t.setDepth(1e3),this.dragon=new ws(this,-2,this.CY),this.dragon.setDepth(10),this.dragon.on("throw",this.onDragonThrow,this),this.dragon.on("death",this.onDragonDeath,this),this.grid=new us(this),this.dices=[],this.enemies=[],this.attackButton=new ks(this,640,130),this.attackButton.setVisible(!1),this.attackButton.on("click",this.onAttack,this),this.musicButton=new xs(this,this.W-87.5,28,"music"),this.musicButton.on("click",(e=>{this.musicButton.toggle(),this.music.volume=this.musicButton.active?this.music_isFull?.25:1e-4:0,this.music_light.volume=this.musicButton.active?this.music_isFull?1e-4:.25:0,this.ambience.volume=this.musicButton.active?.35:0}),this),this.audioButton=new xs(this,this.W-35,28,"audio"),this.audioButton.on("click",(e=>{this.audioButton.toggle(),this.sound.mute=!this.audioButton.active}),this),this.ui=new gs(this),this.ui.setDepth(1e4),this.overlayText=this.createText(this.W/2+.5,this.H/2+.5,32,"#fff","Overlay"),this.overlayText.setOrigin(.5),this.overlayText.setStroke("#000",5),this.overlayText.setDepth(20),this.overlayText.setAlpha(0),this.particles=new ys(this),this.particles.setDepth(1e3),this.input.addPointer(2),this.input.on("pointerdown",(e=>{})),this.input.on("pointermove",(e=>{})),this.input.on("pointerup",(e=>{for(let e of this.dices)e.dragging&&e.onRelease()})),this.music=new hs(this,"m_main_music",{volume:1e-5}),this.music_light=new hs(this,"m_main_music_light",{volume:.25}),this.ambience=new hs(this,"m_city_ambience",{volume:.35}),this.music.play(),this.music_light.play(),this.ambience.play(),this.music_isFull=!1,this.score=0,this.highscore=0,this.highscoreFanfarePlayed=!1,this.loadHighscore(),this.onNewRound()}update(e,t){this.dragon.update(e,t);for(const i of this.dices)i.update(e,t);for(const i of this.enemies)i.update(e,t);this.attackButton.update(e,t),this.musicButton.update(e,t),this.audioButton.update(e,t),this.particles.update(e/1e3,t/1e3),this.ui.update(e/1e3,t/1e3),this.grid.update(e/1e3,t/1e3),this.cameraShakeValue>0?this.cameras.main.x=this.cameraShakeValue*Math.sin(.1*e):this.cameras.main.x=0,this.state,Es.GameOverPhase}initAnimations(){this.anims.create({key:"dragon_idle",frames:[{key:"dragon_idle",frame:0,duration:600},{key:"dragon_idle",frame:1,duration:400},{key:"dragon_idle",frame:2,duration:600},{key:"dragon_idle",frame:1,duration:400}],repeat:-1}),this.anims.create({key:"dragon_prepare",frames:[{key:"dragon_prepare",frame:0,duration:300},{key:"dragon_prepare",frame:1,duration:400}]}),this.anims.create({key:"dragon_throw",frames:[{key:"dragon_throw",frame:0,duration:500},{key:"dragon_throw",frame:1,duration:300},{key:"dragon_throw",frame:2,duration:200}]}),this.anims.create({key:"dragon_hurt",frames:[{key:"dragon_hurt",frame:0,duration:1500}],repeat:-1}),this.anims.create({key:"enemy_peasant_idle",frames:[{key:"enemy_peasant",frame:0,duration:500},{key:"enemy_peasant",frame:1,duration:500}],repeat:-1}),this.anims.create({key:"enemy_peasant_walk",frames:[{key:"enemy_peasant",frame:2,duration:100},{key:"enemy_peasant",frame:0,duration:100}],repeat:-1}),this.anims.create({key:"enemy_peasant_attack",frames:[{key:"enemy_peasant",frame:1,duration:100},{key:"enemy_peasant",frame:2,duration:100},{key:"enemy_peasant",frame:3,duration:100}],repeat:-1}),this.anims.create({key:"enemy_squire_idle",frames:[{key:"enemy_squire",frame:0,duration:500},{key:"enemy_squire",frame:1,duration:500}],repeat:-1}),this.anims.create({key:"enemy_squire_walk",frames:[{key:"enemy_squire",frame:2,duration:100},{key:"enemy_squire",frame:0,duration:100}],repeat:-1}),this.anims.create({key:"enemy_squire_attack",frames:[{key:"enemy_squire",frame:0,duration:100},{key:"enemy_squire",frame:2,duration:100},{key:"enemy_squire",frame:3,duration:100}],repeat:-1}),this.anims.create({key:"enemy_tank_idle",frames:[{key:"enemy_tank",frame:0,duration:500},{key:"enemy_tank",frame:1,duration:500}],repeat:-1}),this.anims.create({key:"enemy_tank_walk",frames:[{key:"enemy_tank",frame:2,duration:100},{key:"enemy_tank",frame:0,duration:100}],repeat:-1}),this.anims.create({key:"enemy_tank_attack",frames:[{key:"enemy_tank",frame:0,duration:100},{key:"enemy_tank",frame:2,duration:100},{key:"enemy_tank",frame:3,duration:60},{key:"enemy_tank",frame:4,duration:120}],repeat:-1}),this.anims.create({key:"enemy_trojan_idle",frames:[{key:"enemy_trojan",frame:0,duration:500},{key:"enemy_trojan",frame:1,duration:500}],repeat:-1}),this.anims.create({key:"enemy_trojan_walk",frames:[{key:"enemy_trojan",frame:2,duration:100},{key:"enemy_trojan",frame:0,duration:100}],repeat:-1}),this.anims.create({key:"enemy_trojan_walk",frames:[{key:"enemy_trojan",frame:2,duration:100},{key:"enemy_trojan",frame:1,duration:100},{key:"enemy_trojan",frame:0,duration:100}],repeat:-1})}generateDice(){let e=[0,0,1,1,2,2];e=e.sort((()=>.5-Math.random())).slice(0,3);let t=[];for(;t.reduce(((e,t)=>e+t),0)<6;){t=[];for(let i of e)t.push(Phaser.Math.Between(1,cs[i].sides))}for(let i=0;i<3;i++){const s=cs[e[i]],a=t[i];this.addDice(s,a)}}addDice(e,t){const i=new ps(this,300,this.CY,e,t);this.dices.push(i);const s=this.grid.getRandomFree();s&&this.grid.addDice(s,i),i.on("drag",((e,t)=>{this.grid.snap(e,t,i)}))}addEnemy(e,t){let i=ns.get(e);if(null!=i){const e=i.spawn(this,this.grid,t);return this.enemies.push(...e),e}return[]}onAttack(){this.sound.play("u_attack_button",{volume:.5}),this.state=Es.DamagePhase,this.attackButton.setVisible(!1);const e=this.grid.getDamageGrid();this.flash(3e3,16750967,.6),this.shake(500,4,0),this.grid.explodeGrid();for(const e of this.dices)e.inStorage||(this.grid.clear(e.coord),e.destroy());this.grid.updateGrid(),this.dices=this.dices.filter((e=>e.inStorage));for(const t of this.enemies)if(t.coord){const i=e[t.coord.j][t.coord.i];i>0&&t.damage(i)}this.addEvent(1e3,this.onEnemyMove)}onEnemyMove(){this.state=Es.MovementPhase;for(const e of this.enemies)e.alive||(this.addScore(e.behaviour.score),e.destroy());this.enemies=this.enemies.filter((e=>e.alive));let e=!1,t=800;this.enemies.length>0?this.grid.moveEnemies():(As.length<=this.round&&(this.addScore(100),this.overlayText.setColor("#fd0"),this.overlayText.setText("Perfect Clear!"),this.dragon.heal(1),this.sound.play("m_sparkle",{volume:.7,pan:-.2}),this.tweens.add({targets:this.overlayText,duration:200,ease:"Cubic.Out",alpha:{from:0,to:1},scale:{from:2,to:1}}),this.tweens.add({targets:this.overlayText,delay:1400,duratioonEnemyAttackn:800,ease:"Linear",alpha:{from:1,to:0}})),t=0,e=!0);do{const e=As[this.round++];if(e){if(e.event&&e.event(this),e.optional&&0==this.enemies.filter((e=>e.alive)).length)continue;e.group.forEach((e=>{this.addEnemy(e.type,e.y)}))}else{let e=Phaser.Math.Between(rs.SQUIRE,rs.SPAWNABLE_COUNT-1);if(e==rs.PEASANT)for(let t=Phaser.Math.Between(1,4);t>=0;t--)this.addEnemy(e);else if(e==rs.SQUIRE)for(let t=Phaser.Math.Between(1,3);t>=0;t--)this.addEnemy(e);else this.addEnemy(e),Math.random()<.3&&(console.log("+ peasant"),this.addEnemy(rs.PEASANT)),Math.random()<.3&&(console.log("+ squire"),this.addEnemy(rs.SQUIRE))}}while(this.enemies.filter((e=>e.alive)).length<1);for(let e of this.enemies)e.playWalk();this.enemies.length>0&&!this.grid.needMoreEnemies()&&this.sound.play("e_advance",{volume:1==this.enemies.length?.3:.5}),this.addEvent(t,(()=>{e&&this.sound.play("m_scatter",{volume:.5,delay:.2}),this.onEnemyAttack()}))}onEnemyAttack(){this.state=Es.AttackPhase;let e=this.enemies.filter((e=>e.coord&&0==e.coord.i));for(let e of this.enemies)e.playIdle();if(e.length>0){for(let t of e)t.playAttack();this.addEvent(500,(()=>{this.dragon.damage(e.length)})),this.addEvent(1e3,(()=>this.dragon.alive&&this.onNewRound()))}else this.onNewRound()}onNewRound(){this.state=Es.ThrowDice,this.attackButton.setVisible(!1);for(let e of this.enemies)e.playIdle();this.grid.needMoreEnemies()?this.addEvent(200,this.onEnemyMove):this.dragon.throw()}onDragonThrow(){this.sound.play(`m_whoosh_${Phaser.Math.RND.pick(["hard","medium"])}_${Phaser.Math.Between(1,4)}`,{volume:.35,pan:-.3,rate:1.28}),this.generateDice(),this.shake(300,2,0),this.addEvent(1800,this.onPlayerTurn,this)}onPlayerTurn(){this.state=Es.MoveDice,this.tweens.add({targets:this.attackButton.fire,scaleY:{from:0,to:.6},duration:200,ease:"Cubic.Out"}),this.attackButton.setVisible(!0),this.sound.play(`m_fire_ignite_${Phaser.Math.Between(1,3)}`,{volume:.85})}onDragonDeath(){for(let e of this.enemies)e.playIdle();this.state=Es.GameOverPhase,this.cameras.main.setPostPipeline(es),this.music.stop(),this.music_light.stop(),this.addEvent(2e3,(()=>{this.fade(!0,1e3,0),this.addEvent(1050,(()=>{this.ambience.stop(),this.scene.start("GameoverScene")}))}))}loadSounds(){}onPlayerDeath(){}loadHighscore(){try{let e=JSON.parse(localStorage.getItem("DiceSaveData"));e&&e.highscore&&!isNaN(parseInt(e.highscore))&&(this.highscore=Phaser.Math.Clamp(e.highscore,0,99999999),this.initialHighscore=this.highscore,this.ui.setScore(this.score,this.highscore))}catch(e){}}saveHighscore(){try{localStorage.setItem("DiceSaveData",JSON.stringify({version:1,highscore:this.highscore}))}catch(e){}}addScore(e){this.score+=e,this.highscore=Math.max(this.highscore,this.score),this.ui.setScore(this.score,this.highscore),this.saveHighscore(),this.score>this.highscore&&!this.highscoreFanfarePlayed&&this.initialHighscore>10&&(this.sound.play("j_trumpet",{volume:.5}),this.highscoreFanfarePlayed=!0)}setStageName(e){console.log("Stage:",e),this.sound.play("j_timpani",{volume:.9,pan:-.2}),this.overlayText.setColor("#0df"),this.overlayText.setText(e),this.tweens.add({targets:this.overlayText,duration:200,ease:"Cubic.Out",alpha:{from:0,to:1},scale:{from:2,to:1}}),this.tweens.add({targets:this.overlayText,delay:3e3,duration:800,ease:"Linear",alpha:{from:1,to:0}}),"Move the dice to attack"!=e&&(this.music_isFull=!0,this.musicButton.active&&(this.music.volume=.25,this.music_light.volume=0))}},class extends s{constructor(){super({key:"GameoverScene"})}create(){this.fade(!1,200,0),this.bg=this.add.image(this.CX,this.CY,"bg_gameover"),this.containToScreen(this.bg),this.title=this.createText(this.CX,this.CY-45,60,"#000","Game Over"),this.title.setOrigin(.5,1),this.title.setStroke("#FFF",8),this.subtitle=this.createText(this.CX,this.CY-20,35,"#000","Tap to try again"),this.subtitle.setOrigin(.5),this.subtitle.setStroke("#FFF",4),this.tap=this.createText(this.CX,this.CY,35,"#000","Tap to focus"),this.tap.setOrigin(.5),this.tap.setAlpha(-1),this.tap.setStroke("#FFF",4),this.credits=this.add.container(0,0),this.credits.setVisible(!1),this.credits.setAlpha(0);let e=this.createText(7,4,14,"#c2185b","GMTK Game Jam 2022\n\n@Golenchu\n@ArcticFqx\n@LuxxArt\n@KonixKun\n@MatoCookies\nKiu\nLumie\nWilon");e.setStroke("#FFF",6),e.setLineSpacing(0),this.credits.add(e);let t=this.createText(120,4,14,"#c2185b","\n\ncode\ncode\nart\nart\nmusic\nsound\nart\nconcept");t.setStroke("#FFF",6),t.setLineSpacing(0),this.credits.add(t),this.musicTitle||(this.musicTitle=new hs(this,"m_city_ambience",{volume:.25}),this.musicTitle.on("bar",this.onBar,this),this.musicTitle.on("beat",this.onBeat,this)),this.sound.play("j_defeat",{volume:.4}),this.musicTitle.play(),this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE).on("down",this.progress,this),this.input.on("pointerdown",(e=>{0!=e.button||this.isStarting||this.progress()}),this),this.isStarting=!1}update(e,t){this.subtitle.setScale(1+.02*Math.sin(5*e/1e3))}progress(){this.sound.play("u_attack_button",{volume:.5}),this.isStarting=!0,this.musicTitle.stop(),this.flash(3e3,16777215,.6),this.addEvent(1e3,(()=>{this.fade(!0,1e3,0),this.addEvent(1050,(()=>{this.musicTitle.stop(),this.scene.start("MenuScene")}))}))}onBar(e){e>=4&&this.title.setVisible(!0),e>=6&&this.subtitle.setVisible(!0),e>=8&&this.credits.setVisible(!0)}onBeat(e){}}],plugins:{global:[]}};new Phaser.Game(Ns)}},i={};function s(e){var a=i[e];if(void 0!==a)return a.exports;var h=i[e]={exports:{}};return t[e].call(h.exports,h,h.exports,s),h.exports}s.m=t,e=[],s.O=(t,i,a,h)=>{if(!i){var o=1/0;for(l=0;l<e.length;l++){for(var[i,a,h]=e[l],r=!0,n=0;n<i.length;n++)(!1&h||o>=h)&&Object.keys(s.O).every((e=>s.O[e](i[n])))?i.splice(n--,1):(r=!1,h<o&&(o=h));if(r){e.splice(l--,1);var d=a();void 0!==d&&(t=d)}}return t}h=h||0;for(var l=e.length;l>0&&e[l-1][2]>h;l--)e[l]=e[l-1];e[l]=[i,a,h]},s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.e=()=>Promise.resolve(),s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var t=s.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e})(),(()=>{var e={179:0};s.O.j=t=>0===e[t];var t=(t,i)=>{var a,h,[o,r,n]=i,d=0;if(o.some((t=>0!==e[t]))){for(a in r)s.o(r,a)&&(s.m[a]=r[a]);if(n)var l=n(s)}for(t&&t(i);d<o.length;d++)h=o[d],s.o(e,h)&&e[h]&&e[h][0](),e[h]=0;return s.O(l)},i=self.webpackChunkFireAndDice=self.webpackChunkFireAndDice||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var a=s.O(void 0,[216],(()=>s(106)));a=s.O(a)})();